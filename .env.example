# =============================================================================
# Variáveis de ambiente – ver .env.example e configurar em .env.local / Vercel
# =============================================================================
# Na Vercel: Settings → Environment Variables (Production e/ou Preview)
# Local: copiar para .env.local (nunca commitar .env ou .env.local)
# =============================================================================

# --- Obrigatórias (app mostra /config-required na Vercel se faltar) ---

# Segredo para sessões NextAuth. Gerar: https://generate-secret.vercel.app/32
# ou: openssl rand -base64 32
AUTH_SECRET=****

# PostgreSQL – connection string (Supabase, Neon, etc.)
# Na Vercel com Supabase: usar SEMPRE o pooler (porta 6543), não a porta 5432.
# Supabase: Dashboard → Settings → Database → Connection string → "Transaction" (URI com :6543).
POSTGRES_URL=postgresql://user:password@host:6543/postgres

# --- Opcionais (Vercel preenche automaticamente em deploy) ---

# AI Gateway – na Vercel usa OIDC; fora da Vercel precisa de API key
# https://vercel.com/ai-gateway
# AI_GATEWAY_API_KEY=****

# Vercel Blob – upload de ficheiros (se não usares Supabase Storage)
# https://vercel.com/docs/vercel-blob
# BLOB_READ_WRITE_TOKEN=****

# --- Supabase (cliente: Auth, Storage, Realtime) ---
# Dashboard → Settings → API. Necessário para upload via Storage (senão usa Blob).
# NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=****
# SUPABASE_SERVICE_ROLE_KEY=****
# Bucket para ficheiros do chat (criar em Storage). Default: chat-files
# SUPABASE_STORAGE_BUCKET=chat-files

# --- Opcionais avançados ---
# Redis – rate limiting do chat. https://vercel.com/docs/redis
# REDIS_URL=****

# =============================================================================
# Troubleshooting: HTTP 500 na Vercel
# =============================================================================
# 1) Variáveis em falta: o middleware redireciona para /config-required quando
#    AUTH_SECRET ou POSTGRES_URL faltam.
# 2) POSTGRES_URL com Supabase: na Vercel tens de usar o POOLER (porta 6543),
#    não a conexão direta (5432). Senão a app devolve 500 por falha de conexão.
#    Em POSTGRES_URL troca :5432 por :6543 (mesmo host e password).
# 3) Confirma em Vercel → Settings → Environment Variables e redeploy.
# 4) Se 500 continuar: Vercel → Deployments → Logs (Runtime) para o erro real.
